var bunyan = require('bunyan');
var path = require('path');
var name = path.basename(require.main.filename, '.js');
var mainBunyanLogger = bunyan.createLogger({
    name: name,
    serializers: bunyan.stdSerializers,
    streams: [
        {
            level: 'trace',
            stream: process.stdout
        },
        {
            level: 'info',
            path: './logs/' + name + '.info.log'
        },
        {
            level: 'warn',
            path: './logs/' + name + '.warn.log'
        },
        {
            level: 'error',
            path: './logs/' + name + '.error.log'
        },
        {
            level: 'fatal',
            path: './logs/' + name + '.fatal.log'
        }
    ]
});

function logger(moduleFilename) {

    return mainBunyanLogger.child({
        module: path.basename(moduleFilename)
    });

}

module.exports = logger;
